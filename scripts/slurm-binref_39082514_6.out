Input is /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2
Output saved in /data/NCBR/projects/NCBR-492/data/manual_analysis/bin_refinement/SF2
metawrap bin_refinement -o /data/NCBR/projects/NCBR-492/data/manual_analysis/bin_refinement/SF2 -t 16 -A /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/metabat2_bins/ -B /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/maxbin2_bins/ -C /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins/ -c 70 -x 5

------------------------------------------------------------------------------------------------------------------------
-----            There is 40 RAM and 16 threads available, and each pplacer thread uses >40GB, so I will           -----
-----                                          use 1 threads for pplacer                                           -----
------------------------------------------------------------------------------------------------------------------------


########################################################################################################################
#####                                                BEGIN PIPELINE!                                               #####
########################################################################################################################


------------------------------------------------------------------------------------------------------------------------
-----                               setting up output folder and copying over bins...                              -----
------------------------------------------------------------------------------------------------------------------------


************************************************************************************************************************
*****             Warning: /data/NCBR/projects/NCBR-492/data/manual_analysis/bin_refinement/SF2 already            *****
*****                                         exists. Attempting to clean.                                         *****
************************************************************************************************************************


------------------------------------------------------------------------------------------------------------------------
-----                                           there are 4 bins in binsA                                          -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                           there are 2 bins in binsB                                          -----
------------------------------------------------------------------------------------------------------------------------

Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.10.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.11.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.12.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.13.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.15.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.16.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.18.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.20.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.21.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.22.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.25.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.2.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.5.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.6.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.8.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF2/concoct_bins//bin.9.fa because the bin size is not between 50kb and 20Mb

------------------------------------------------------------------------------------------------------------------------
-----                                           there are 2 bins in binsC                                          -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                             There are 3 bin sets!                                            -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                              Fix contig naming by removing special characters...                             -----
------------------------------------------------------------------------------------------------------------------------


########################################################################################################################
#####                                             BEGIN BIN REFINEMENT                                             #####
########################################################################################################################


------------------------------------------------------------------------------------------------------------------------
-----              There are three bin folders, so there 4 ways we can refine the bins (A+B, B+C, A+C,             -----
-----                                    A+B+C). Will try all four in parallel!                                    -----
------------------------------------------------------------------------------------------------------------------------

Specified 2 input bin sets: -1 binsA -2 binsB
Add folder/bin name to contig name for binsA bins
Add folder/bin name to contig name for binsB bins
Combine all bins together
The number of refined bins: 2
Exporting refined bins...
Extracting refined bin: Refined_1.fastaExtracting refined bin: Refined_2.fasta
Deleting temporary files

All done!
Specified 2 input bin sets: -1 binsA -2 binsC
Add folder/bin name to contig name for binsA bins
Add folder/bin name to contig name for binsC bins
Combine all bins together
The number of refined bins: 2
Exporting refined bins...
Extracting refined bin: Refined_1.fastaExtracting refined bin: Refined_2.fasta
Deleting temporary files

All done!
Specified 2 input bin sets: -1 binsC -2 binsB
Add folder/bin name to contig name for binsC bins
Add folder/bin name to contig name for binsB bins
Combine all bins together
The number of refined bins: 2
Exporting refined bins...
Extracting refined bin: Refined_1.fastaExtracting refined bin: Refined_2.fasta
Deleting temporary files

All done!
Specified 3 input bin sets: -1 binsA -2 binsB -3 binsC
Add folder/bin name to contig name for binsA bins
Add folder/bin name to contig name for binsB bins
Add folder/bin name to contig name for binsC bins
Combine all bins together
The number of refined bins: 2
Exporting refined bins...
Extracting refined bin: Refined_1.fastaExtracting refined bin: Refined_2.fasta
Deleting temporary files

All done!

------------------------------------------------------------------------------------------------------------------------
-----                                      there are 2 refined bins in binsAB                                      -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                      there are 2 refined bins in binsBC                                      -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                      there are 2 refined bins in binsAC                                      -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                      there are 2 refined bins in binsABC                                     -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                     Bin refinement finished successfully!                                    -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                            fixing bin naming to .fa convention for consistancy...                            -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                              making sure every refined bin set contains bins...                              -----
------------------------------------------------------------------------------------------------------------------------


########################################################################################################################
#####                                      RUNNING CHECKM ON ALL SETS OF BINS                                      #####
########################################################################################################################


------------------------------------------------------------------------------------------------------------------------
-----                                         Running CheckM on binsA bins                                         -----
------------------------------------------------------------------------------------------------------------------------

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id                Marker lineage         # genomes   # markers   # marker sets    0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  bin.3              k__Bacteria (UID203)         5449        104            58         67    37   0   0   0   0       48.28            0.00               0.00          
  bin.unbinned   o__Lactobacillales (UID544)      293         475           267        292   183   0   0   0   0       31.09            0.00               0.00          
  bin.2              k__Bacteria (UID203)         5449        104            58         97    7    0   0   0   0       12.07            0.00               0.00          
  bin.1              k__Bacteria (UID203)         5449        104            58        103    1    0   0   0   0        1.72            0.00               0.00          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----                There are 0 'good' bins found in binsA! (>70% completion and <5% contamination)               -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                         Running CheckM on binsAB bins                                        -----
------------------------------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id             Marker lineage         # genomes   # markers   # marker sets    0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
----------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Refined_1       k__Bacteria (UID203)         5449        104            58         71    33   0   0   0   0       41.38            0.00               0.00          
  Refined_2   o__Lactobacillales (UID544)      293         475           267        335   140   0   0   0   0       20.22            0.00               0.00          
----------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----               There are 0 'good' bins found in binsAB! (>70% completion and <5% contamination)               -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                        Running CheckM on binsABC bins                                        -----
------------------------------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id             Marker lineage         # genomes   # markers   # marker sets    0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
----------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Refined_1       k__Bacteria (UID203)         5449        104            58         71    33   0   0   0   0       41.38            0.00               0.00          
  Refined_2   o__Lactobacillales (UID544)      293         475           267        335   140   0   0   0   0       20.22            0.00               0.00          
----------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----               There are 0 'good' bins found in binsABC! (>70% completion and <5% contamination)              -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                         Running CheckM on binsAC bins                                        -----
------------------------------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id             Marker lineage         # genomes   # markers   # marker sets    0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
----------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Refined_1       k__Bacteria (UID203)         5449        104            58         67    37   0   0   0   0       48.28            0.00               0.00          
  Refined_2   o__Lactobacillales (UID544)      293         475           267        292   183   0   0   0   0       31.09            0.00               0.00          
----------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----               There are 0 'good' bins found in binsAC! (>70% completion and <5% contamination)               -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                         Running CheckM on binsB bins                                         -----
------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id          Marker lineage         # genomes   # markers   # marker sets   0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
------------------------------------------------------------------------------------------------------------------------------------------------------------------
  bin.1    o__Lactobacillales (UID544)      293         475           267        66   409   0   0   0   0       82.68            0.00               0.00          
  bin.0            root (UID1)              5656         56            24        55    1    0   0   0   0        4.17            0.00               0.00          
------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----                There are 1 'good' bins found in binsB! (>70% completion and <5% contamination)               -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                         Running CheckM on binsBC bins                                        -----
------------------------------------------------------------------------------------------------------------------------

---------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id             Marker lineage         # genomes   # markers   # marker sets   0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Refined_2   o__Lactobacillales (UID544)      293         475           267        66   409   0   0   0   0       82.68            0.00               0.00          
  Refined_1           root (UID1)              5656         56            24        55    1    0   0   0   0        4.17            0.00               0.00          
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----               There are 1 'good' bins found in binsBC! (>70% completion and <5% contamination)               -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                         Running CheckM on binsC bins                                         -----
------------------------------------------------------------------------------------------------------------------------

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id              Marker lineage           # genomes   # markers   # marker sets    0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  bin.0        o__Lactobacillales (UID544)        293         475           267         2    473   0   0   0   0       99.53            0.00               0.00          
  unbinned   f__Enterobacteriaceae (UID5066)       55         546           224        448    95   3   0   0   0       18.14            0.94              33.33          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----                There are 1 'good' bins found in binsC! (>70% completion and <5% contamination)               -----
------------------------------------------------------------------------------------------------------------------------


########################################################################################################################
#####                      CONSOLIDATING ALL BIN SETS BY CHOOSING THE BEST VERSION OF EACH BIN                     #####
########################################################################################################################


------------------------------------------------------------------------------------------------------------------------
-----                           There are 3 original bin folders, plus the refined bins.                           -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                        merging binsABC.stats and binsM                                       -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 1 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----                                        merging binsAB.stats and binsM                                        -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 1 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----                                        merging binsAC.stats and binsM                                        -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 1 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----                                         merging binsA.stats and binsM                                        -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 1 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----                                        merging binsBC.stats and binsM                                        -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 2 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----                                         merging binsB.stats and binsM                                        -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 2 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----                                         merging binsC.stats and binsM                                        -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 2 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----             Scanning to find duplicate contigs between bins and only keep them in the best bin...            -----
------------------------------------------------------------------------------------------------------------------------

Loading in bin completion and contamination scores...
Loading in contigs in each bin...
Making a new dereplicated version of each bin file

------------------------------------------------------------------------------------------------------------------------
-----                     You will find the best non-reassembled versions of the bins in binsO                     -----
------------------------------------------------------------------------------------------------------------------------


########################################################################################################################
#####                                          FINALIZING THE REFINED BINS                                         #####
########################################################################################################################


------------------------------------------------------------------------------------------------------------------------
-----                                        Re-running CheckM on binsO bins                                       -----
------------------------------------------------------------------------------------------------------------------------

-----------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id          Marker lineage         # genomes   # markers   # marker sets   0    1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
  bin.1    o__Lactobacillales (UID544)      293         475           267        2   473   0   0   0   0       99.53            0.00               0.00          
-----------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----            There are 1 'good' bins found in binsO.checkm! (>70% completion and <5% contamination)            -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                 Removing bins that are inadequate quality...                                 -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----           Re-evaluating bin quality after contig de-replication is complete! There are still 1 high          -----
-----                                                quality bins.                                                 -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                making completion and contamination ranking plots for all refinement iterations               -----
------------------------------------------------------------------------------------------------------------------------

Loading completion info....
binsABC.stats
binsAB.stats
binsAC.stats
binsA.stats
binsBC.stats
binsB.stats
binsC.stats
binsM.stats
binsO.stats
Plotting completion data...
Loading contamination info...
Plotting the contamination data...
Saving figures binning_results.eps and binning_results.png ...

########################################################################################################################
#####                                          MOVING OVER TEMPORARY FILES                                         #####
########################################################################################################################


------------------------------------------------------------------------------------------------------------------------
-----                      making completion and contamination ranking plots of final outputs                      -----
------------------------------------------------------------------------------------------------------------------------

Loading completion info....
concoct_bins.stats
maxbin2_bins.stats
metabat2_bins.stats
metawrap_70_5_bins.stats
Plotting completion data...
Loading contamination info...
Plotting the contamination data...
Saving figures binning_results.eps and binning_results.png ...

------------------------------------------------------------------------------------------------------------------------
-----                       making contig membership files (for Anvio and other applications)                      -----
------------------------------------------------------------------------------------------------------------------------

summarizing concoct_bins ...
summarizing maxbin2_bins ...
summarizing metabat2_bins ...
summarizing metawrap_70_5_bins ...

########################################################################################################################
#####                                BIN_REFINEMENT PIPELINE FINISHED SUCCESSFULLY!                                #####
########################################################################################################################

Wed Oct 23 20:33:31 EDT 2024
