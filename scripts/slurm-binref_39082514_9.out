Input is /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF5
Output saved in /data/NCBR/projects/NCBR-492/data/manual_analysis/bin_refinement/SF5
metawrap bin_refinement -o /data/NCBR/projects/NCBR-492/data/manual_analysis/bin_refinement/SF5 -t 16 -A /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF5/metabat2_bins/ -B /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF5/maxbin2_bins/ -C /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF5/concoct_bins/ -c 70 -x 5

------------------------------------------------------------------------------------------------------------------------
-----            There is 40 RAM and 16 threads available, and each pplacer thread uses >40GB, so I will           -----
-----                                          use 1 threads for pplacer                                           -----
------------------------------------------------------------------------------------------------------------------------


########################################################################################################################
#####                                                BEGIN PIPELINE!                                               #####
########################################################################################################################


------------------------------------------------------------------------------------------------------------------------
-----                               setting up output folder and copying over bins...                              -----
------------------------------------------------------------------------------------------------------------------------


************************************************************************************************************************
*****             Warning: /data/NCBR/projects/NCBR-492/data/manual_analysis/bin_refinement/SF5 already            *****
*****                                         exists. Attempting to clean.                                         *****
************************************************************************************************************************

Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF5/metabat2_bins//bin.unbinned.fa because the bin size is not between 50kb and 20Mb

------------------------------------------------------------------------------------------------------------------------
-----                                           there are 1 bins in binsA                                          -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                           there are 2 bins in binsB                                          -----
------------------------------------------------------------------------------------------------------------------------

Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF5/concoct_bins//bin.0.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF5/concoct_bins//bin.13.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF5/concoct_bins//bin.1.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF5/concoct_bins//bin.3.fa because the bin size is not between 50kb and 20Mb
Skipping /data/NCBR/projects/NCBR-492/data/manual_analysis/binning/SF5/concoct_bins//bin.7.fa because the bin size is not between 50kb and 20Mb

------------------------------------------------------------------------------------------------------------------------
-----                                           there are 2 bins in binsC                                          -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                             There are 3 bin sets!                                            -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                              Fix contig naming by removing special characters...                             -----
------------------------------------------------------------------------------------------------------------------------


########################################################################################################################
#####                                             BEGIN BIN REFINEMENT                                             #####
########################################################################################################################


------------------------------------------------------------------------------------------------------------------------
-----              There are three bin folders, so there 4 ways we can refine the bins (A+B, B+C, A+C,             -----
-----                                    A+B+C). Will try all four in parallel!                                    -----
------------------------------------------------------------------------------------------------------------------------

Specified 2 input bin sets: -1 binsA -2 binsC
Add folder/bin name to contig name for binsA bins
Add folder/bin name to contig name for binsC bins
Combine all bins together
The number of refined bins: 1
Exporting refined bins...
Extracting refined bin: Refined_1.fasta
Deleting temporary files

All done!
Specified 2 input bin sets: -1 binsA -2 binsB
Add folder/bin name to contig name for binsA bins
Add folder/bin name to contig name for binsB bins
Combine all bins together
The number of refined bins: 2
Exporting refined bins...
Extracting refined bin: Refined_1.fastaExtracting refined bin: Refined_2.fasta
Deleting temporary files

All done!
Specified 2 input bin sets: -1 binsC -2 binsB
Add folder/bin name to contig name for binsC bins
Add folder/bin name to contig name for binsB bins
Combine all bins together
The number of refined bins: 2
Exporting refined bins...
Extracting refined bin: Refined_1.fastaExtracting refined bin: Refined_2.fasta
Deleting temporary files

All done!
Specified 3 input bin sets: -1 binsA -2 binsB -3 binsC
Add folder/bin name to contig name for binsA bins
Add folder/bin name to contig name for binsB bins
Add folder/bin name to contig name for binsC bins
Combine all bins together
The number of refined bins: 2
Exporting refined bins...
Extracting refined bin: Refined_1.fastaExtracting refined bin: Refined_2.fasta
Deleting temporary files

All done!

------------------------------------------------------------------------------------------------------------------------
-----                                      there are 2 refined bins in binsAB                                      -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                      there are 2 refined bins in binsBC                                      -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                      there are 1 refined bins in binsAC                                      -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                      there are 2 refined bins in binsABC                                     -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                     Bin refinement finished successfully!                                    -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                            fixing bin naming to .fa convention for consistancy...                            -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                              making sure every refined bin set contains bins...                              -----
------------------------------------------------------------------------------------------------------------------------


########################################################################################################################
#####                                      RUNNING CHECKM ON ALL SETS OF BINS                                      #####
########################################################################################################################


------------------------------------------------------------------------------------------------------------------------
-----                                         Running CheckM on binsA bins                                         -----
------------------------------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id            Marker lineage           # genomes   # markers   # marker sets   0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
----------------------------------------------------------------------------------------------------------------------------------------------------------------------
  bin.1    f__Enterobacteriaceae (UID5066)       55         546           224        33   513   0   0   0   0       98.05            0.00               0.00          
----------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----                There are 1 'good' bins found in binsA! (>70% completion and <5% contamination)               -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                         Running CheckM on binsAB bins                                        -----
------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id               Marker lineage           # genomes   # markers   # marker sets    0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Refined_1   f__Enterobacteriaceae (UID5066)       55         546           224        160   386   0   0   0   0       73.99            0.00               0.00          
  Refined_2         k__Bacteria (UID203)           5449        104            58         93    11   0   0   0   0       13.79            0.00               0.00          
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----               There are 1 'good' bins found in binsAB! (>70% completion and <5% contamination)               -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                        Running CheckM on binsABC bins                                        -----
------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id               Marker lineage           # genomes   # markers   # marker sets    0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Refined_1   f__Enterobacteriaceae (UID5066)       55         546           224        160   386   0   0   0   0       73.99            0.00               0.00          
  Refined_2         k__Bacteria (UID203)           5449        104            58         93    11   0   0   0   0       13.79            0.00               0.00          
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----               There are 1 'good' bins found in binsABC! (>70% completion and <5% contamination)              -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                         Running CheckM on binsAC bins                                        -----
------------------------------------------------------------------------------------------------------------------------

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id               Marker lineage           # genomes   # markers   # marker sets   0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Refined_1   f__Enterobacteriaceae (UID5066)       55         546           224        33   513   0   0   0   0       98.05            0.00               0.00          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----               There are 1 'good' bins found in binsAC! (>70% completion and <5% contamination)               -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                         Running CheckM on binsB bins                                         -----
------------------------------------------------------------------------------------------------------------------------

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id            Marker lineage           # genomes   # markers   # marker sets    0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
  bin.0    f__Enterobacteriaceae (UID5066)       55         546           224        160   386   0   0   0   0       73.99            0.00               0.00          
  bin.1    f__Enterobacteriaceae (UID5066)       55         546           224        392   154   0   0   0   0       25.82            0.00               0.00          
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----                There are 1 'good' bins found in binsB! (>70% completion and <5% contamination)               -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                         Running CheckM on binsBC bins                                        -----
------------------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id               Marker lineage           # genomes   # markers   # marker sets    0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Refined_1   f__Enterobacteriaceae (UID5066)       55         546           224        160   386   0   0   0   0       73.99            0.00               0.00          
  Refined_2   f__Enterobacteriaceae (UID5066)       55         546           224        392   154   0   0   0   0       25.82            0.00               0.00          
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----               There are 1 'good' bins found in binsBC! (>70% completion and <5% contamination)               -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                         Running CheckM on binsC bins                                         -----
------------------------------------------------------------------------------------------------------------------------

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id              Marker lineage           # genomes   # markers   # marker sets    0     1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  bin.12     f__Enterobacteriaceae (UID5066)       55         546           224         6    540   0   0   0   0       99.81            0.00               0.00          
  unbinned          k__Archaea (UID2)             207         145           103        138    7    0   0   0   0        4.21            0.00               0.00          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----                There are 1 'good' bins found in binsC! (>70% completion and <5% contamination)               -----
------------------------------------------------------------------------------------------------------------------------


########################################################################################################################
#####                      CONSOLIDATING ALL BIN SETS BY CHOOSING THE BEST VERSION OF EACH BIN                     #####
########################################################################################################################


------------------------------------------------------------------------------------------------------------------------
-----                           There are 3 original bin folders, plus the refined bins.                           -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                        merging binsABC.stats and binsM                                       -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 2 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----                                        merging binsAB.stats and binsM                                        -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 2 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----                                        merging binsAC.stats and binsM                                        -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 2 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----                                         merging binsA.stats and binsM                                        -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 2 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----                                        merging binsBC.stats and binsM                                        -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 2 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----                                         merging binsB.stats and binsM                                        -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 2 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----                                         merging binsC.stats and binsM                                        -----
------------------------------------------------------------------------------------------------------------------------

Loading list of good bins (comp>70.0%, cont<5.0%)
load in the info about the contigs in each bin...
make all bossible comparisons between the two bin sets, and record total % idential length
load in completion and contamination scores of all the bins
go through first group, pull out identical bins from second group, and choose best
retrieve bins from second group that were not found in first group
There were 2 bins cherry-picked from the original sets!

------------------------------------------------------------------------------------------------------------------------
-----             Scanning to find duplicate contigs between bins and only keep them in the best bin...            -----
------------------------------------------------------------------------------------------------------------------------

Loading in bin completion and contamination scores...
Loading in contigs in each bin...
Making a new dereplicated version of each bin file

------------------------------------------------------------------------------------------------------------------------
-----                     You will find the best non-reassembled versions of the bins in binsO                     -----
------------------------------------------------------------------------------------------------------------------------


########################################################################################################################
#####                                          FINALIZING THE REFINED BINS                                         #####
########################################################################################################################


------------------------------------------------------------------------------------------------------------------------
-----                                        Re-running CheckM on binsO bins                                       -----
------------------------------------------------------------------------------------------------------------------------

---------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Bin Id            Marker lineage           # genomes   # markers   # marker sets   0    1    2   3   4   5+   Completeness   Contamination   Strain heterogeneity  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
  bin.1    f__Enterobacteriaceae (UID5066)       55         546           224        6   540   0   0   0   0       99.81            0.00               0.00          
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------------------
-----            There are 1 'good' bins found in binsO.checkm! (>70% completion and <5% contamination)            -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                                 Removing bins that are inadequate quality...                                 -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----           Re-evaluating bin quality after contig de-replication is complete! There are still 1 high          -----
-----                                                quality bins.                                                 -----
------------------------------------------------------------------------------------------------------------------------


------------------------------------------------------------------------------------------------------------------------
-----                making completion and contamination ranking plots for all refinement iterations               -----
------------------------------------------------------------------------------------------------------------------------

Loading completion info....
binsABC.stats
binsAB.stats
binsAC.stats
binsA.stats
binsBC.stats
binsB.stats
binsC.stats
binsM.stats
binsO.stats
Plotting completion data...
Loading contamination info...
Plotting the contamination data...
Saving figures binning_results.eps and binning_results.png ...

########################################################################################################################
#####                                          MOVING OVER TEMPORARY FILES                                         #####
########################################################################################################################


------------------------------------------------------------------------------------------------------------------------
-----                      making completion and contamination ranking plots of final outputs                      -----
------------------------------------------------------------------------------------------------------------------------

Loading completion info....
concoct_bins.stats
maxbin2_bins.stats
metabat2_bins.stats
metawrap_70_5_bins.stats
Plotting completion data...
Loading contamination info...
Plotting the contamination data...
Saving figures binning_results.eps and binning_results.png ...

------------------------------------------------------------------------------------------------------------------------
-----                       making contig membership files (for Anvio and other applications)                      -----
------------------------------------------------------------------------------------------------------------------------

summarizing concoct_bins ...
summarizing maxbin2_bins ...
summarizing metabat2_bins ...
summarizing metawrap_70_5_bins ...

########################################################################################################################
#####                                BIN_REFINEMENT PIPELINE FINISHED SUCCESSFULLY!                                #####
########################################################################################################################

Wed Oct 23 20:39:55 EDT 2024
